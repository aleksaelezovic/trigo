<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing - Trigo Documentation</title>
    <meta name="description" content="W3C test suite validation for Trigo - RDF parser tests, SPARQL compliance, and test results">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-touch-icon.png">
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo-section">
                <svg viewBox="240 100 520 500" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M487.5 109.6C469 111.5 442.8 117.5 426.4 123.6C414.2 128.1 392.9 138.2 383.5 144C339.2 171.1 301.8 217.1 284.6 265.5C261.6 330.4 266.1 403.4 296.8 462C309.5 486.3 321.7 502.8 341.4 522.5C384.2 565.2 437.4 588.4 500.5 591.8C516.5 592.7 520.3 592.6 537.5 590.9C573.9 587.3 614.8 572.8 646 552.3C729.1 497.7 769.7 395.2 747.5 295.9C739.6 261.1 723.3 226.7 701.8 200C687.5 182.2 661.2 158.9 641.2 146.3C625.7 136.5 603.5 126.1 586.5 120.6C578.2 118 557.1 113.1 546.5 111.5C536.9 109.9 496.7 108.7 487.5 109.6ZM540.6 132.5C610.7 141.7 673.5 185.5 706.4 248C722.9 279.4 730.7 308.9 731.7 343.5C733.5 405.6 710.7 463.8 667.8 506.1C633.9 539.7 594.9 559.5 546 568.2C527.6 571.4 494 571.4 475.5 568.1C424.9 559 380 534.2 348.2 497.6C332.6 479.7 324.8 468.5 316 451.2C305 429.9 297.7 406.5 293.4 378C290.9 362.1 290.9 332.6 293.3 317.1C298 287 308.8 258.1 324.8 232.3C341 206.1 365.3 181.6 392 164.6C417.1 148.6 454 135.6 484.8 132C496.9 130.6 528.2 130.9 540.6 132.5Z" fill="white"/>
                    <path d="M498.9 189.5C487.6 193.1 479 200.6 474.2 210.8C471.8 215.9 471.5 217.6 471.5 228.1C471.5 239.3 471.6 239.8 475.1 246.9L478.7 254.1L468.1 267.3C455.6 282.9 413.5 336 399 354.5C393.4 361.6 388.2 367.6 387.4 367.8C386.7 368 383.7 367.7 380.7 367.1C373.8 365.8 364.5 367.1 358.4 370.2C355.9 371.4 351.4 375 348.5 378.2C329 399.2 338.7 433.7 366.4 441.5C389.3 448.1 413 430.6 413 407.1V402.5L438.8 394.7C452.9 390.4 470.4 385 477.5 382.7L490.6 378.5L495.3 381.7C505 388.2 517.2 388.3 527 382C532.9 378.2 525.4 376.5 591.5 396.7L610.5 402.5L611.2 409.4C614.5 443.1 657.5 455 677.6 427.8C683.4 419.9 685.5 413.4 685.4 403.5C685.3 392.2 682.5 385.4 674.6 377.4C666.2 369 660 366.6 647.5 367.3C642.6 367.6 637.7 367.9 636.6 368.1C635.3 368.4 633 366.2 628.1 359.9C624.5 355.2 616.6 345 610.6 337.4C604.6 329.8 593.1 315.2 585.2 305C577.2 294.8 564.9 279.5 557.9 270.8L545.1 255.2L548 249.3C559.1 227.3 550.8 201.8 529.2 191.7C523.4 189 521.3 188.5 513 188.3C506.7 188.1 501.9 188.5 498.9 189.5ZM512.5 269C516.5 269 521.6 268.3 523.9 267.5L528 266.1L531.4 270.3C540.8 281.8 580.7 332.6 601.8 360C614.3 376.2 618.7 382.6 617.6 382.8C616.7 383 604.1 379.7 589.7 375.5C547.4 363.2 540.6 361 539.8 359.7C539.4 359.1 539 356.6 539 354.2C539 346.6 533.2 338.3 524.6 333.7C518.7 330.5 504.3 330.5 498.4 333.7C489.7 338.3 484.8 345.7 483.3 356L482.5 361.3L466 366.1C441.5 373.4 412.9 381.7 409.7 382.4C407.1 383 406.9 382.8 407.2 380.6C407.5 378.4 434.2 343.7 482.2 283.4L495.9 266.2L500.6 267.6C503.2 268.4 508.6 269 512.5 269Z" fill="white"/>
                </svg>
                <h1>Trigo Documentation</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="quickstart.html">Quick Start</a></li>
                    <li><a href="architecture.html">Architecture</a></li>
                    <li><a href="http-endpoint.html">HTTP API</a></li>
                    <li><a href="testing.html" class="active">Testing</a></li>
                    <li><a href="https://github.com/aleksaelezovic/trigo" target="_blank">GitHub</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <h1>W3C Test Suites</h1>

        <p>Trigo includes infrastructure for running both the official W3C SPARQL 1.1 test suite and W3C RDF 1.1/1.2 test suites to validate compliance with SPARQL and RDF standards.</p>

        <h2>Setup</h2>

        <p>The W3C test suite is included as a git submodule:</p>

        <pre><code># Clone with submodules
git clone --recursive https://github.com/aleksaelezovic/trigo.git

# Or initialize submodules after cloning
git submodule update --init --recursive</code></pre>

        <h2>Test Suite Structure</h2>

        <p>The test suite is located in <code>testdata/rdf-tests/</code> and includes:</p>

        <ul>
            <li><strong>sparql10/</strong> - SPARQL 1.0 tests</li>
            <li><strong>sparql11/</strong> - SPARQL 1.1 Query and Update tests</li>
            <li><strong>sparql12/</strong> - SPARQL 1.2 tests</li>
            <li><strong>rdf/rdf11/</strong> - RDF 1.1 parser tests (Turtle, N-Triples, N-Quads, TriG, RDF/XML)</li>
            <li><strong>rdf/rdf12/</strong> - RDF 1.2 parser tests (with RDF-star support)</li>
        </ul>

        <h3>Test Categories</h3>

        <p>Tests are organized by feature:</p>

        <pre><code>sparql11/
â”œâ”€â”€ syntax-query/        # Query syntax (positive/negative)
â”œâ”€â”€ syntax-update/       # Update syntax tests
â”œâ”€â”€ aggregates/          # COUNT, SUM, AVG, etc.
â”œâ”€â”€ bind/                # BIND clause
â”œâ”€â”€ bindings/            # VALUES clause
â”œâ”€â”€ construct/           # CONSTRUCT queries
â”œâ”€â”€ exists/              # EXISTS and NOT EXISTS
â”œâ”€â”€ functions/           # Built-in functions
â”œâ”€â”€ grouping/            # GROUP BY
â”œâ”€â”€ negation/            # MINUS, FILTER NOT EXISTS
â”œâ”€â”€ property-path/       # Property paths
â”œâ”€â”€ subquery/            # Subqueries
â””â”€â”€ ...</code></pre>

        <h2>Running Tests</h2>

        <h3>Build the Test Runner</h3>

        <pre><code>go build -o test-runner ./cmd/test-runner</code></pre>

        <h3>Run Specific Test Suite</h3>

        <pre><code># Run SPARQL syntax tests
./test-runner testdata/rdf-tests/sparql/sparql11/syntax-query

# Run a specific SPARQL manifest
./test-runner testdata/rdf-tests/sparql/sparql11/syntax-query/manifest.ttl

# Run RDF parser tests
./test-runner testdata/rdf-tests/rdf/rdf11/rdf-turtle      # Turtle parser tests
./test-runner testdata/rdf-tests/rdf/rdf11/rdf-n-triples   # N-Triples parser tests
./test-runner testdata/rdf-tests/rdf/rdf11/rdf-n-quads     # N-Quads parser tests
./test-runner testdata/rdf-tests/rdf/rdf11/rdf-trig        # TriG parser tests
./test-runner testdata/rdf-tests/rdf/rdf11/rdf-xml         # RDF/XML parser tests

# Run RDF 1.2 parser tests
./test-runner testdata/rdf-tests/rdf/rdf12/rdf-turtle      # RDF 1.2 Turtle tests
./test-runner testdata/rdf-tests/rdf/rdf12/rdf-n-triples   # RDF 1.2 N-Triples tests
./test-runner testdata/rdf-tests/rdf/rdf12/rdf-trig        # RDF 1.2 TriG tests</code></pre>

        <h3>Example Output</h3>

        <pre><code>ğŸ“‹ Running manifest: testdata/rdf-tests/sparql/sparql11/syntax-query/manifest.ttl
   Found 94 tests

  âœ… PASS: syntax-construct-where-02.rq
  âŒ FAIL: syntax-aggregate-01.rq
  â­ï¸  SKIP: syntax-update-01.ru

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š TEST SUMMARY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total:   94
Passed:  29 (30.9%)
Failed:  64
Skipped: 1
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</code></pre>

        <h2>Test Types</h2>

        <h3>SPARQL Test Types</h3>

        <h4>Positive Syntax Tests</h4>

        <p>Verify that valid SPARQL queries parse successfully:</p>

        <pre><code>:test1 rdf:type mf:PositiveSyntaxTest11 ;
    mf:name "Basic SELECT" ;
    mf:action &lt;query.rq&gt; .</code></pre>

        <h4>Negative Syntax Tests</h4>

        <p>Verify that invalid queries are rejected:</p>

        <pre><code>:test2 rdf:type mf:NegativeSyntaxTest11 ;
    mf:name "Invalid WHERE" ;
    mf:action &lt;bad-query.rq&gt; .</code></pre>

        <h4>Query Evaluation Tests</h4>

        <p>Execute queries against data and compare results:</p>

        <pre><code>:test3 rdf:type mf:QueryEvaluationTest ;
    mf:name "Basic BGP" ;
    mf:action [
        qt:query &lt;query.rq&gt; ;
        qt:data &lt;data.ttl&gt;
    ] ;
    mf:result &lt;result.srx&gt; .</code></pre>

        <h3>RDF Test Types</h3>

        <h4>Positive Syntax Tests</h4>

        <p>Verify that RDF documents parse successfully:</p>

        <pre><code>:test1 rdf:type rdft:TestTurtlePositiveSyntax ;
    mf:name "Basic Turtle" ;
    mf:action &lt;data.ttl&gt; .</code></pre>

        <h4>Negative Syntax Tests</h4>

        <p>Verify that invalid RDF documents are rejected:</p>

        <pre><code>:test2 rdf:type rdft:TestTurtleNegativeSyntax ;
    mf:name "Invalid Turtle" ;
    mf:action &lt;bad-data.ttl&gt; .</code></pre>

        <h4>Evaluation Tests</h4>

        <p>Parse RDF documents and compare with expected triples:</p>

        <pre><code>:test3 rdf:type rdft:TestTurtleEval ;
    mf:name "Complex Turtle" ;
    mf:action &lt;input.ttl&gt; ;
    mf:result &lt;expected.nt&gt; .</code></pre>

        <h2>Current Test Support</h2>

        <h3>RDF Parser Tests (RDF 1.1 & 1.2)</h3>

        <h4>Implemented Formats</h4>
        <ul>
            <li><strong>Turtle</strong>: Full parser with PREFIX/BASE, property lists, collections
                <ul>
                    <li>Pass rate varies by test suite</li>
                    <li>Some advanced features may not be fully compliant</li>
                </ul>
            </li>
            <li><strong>N-Triples</strong>: 70.0% pass rate (49/70 tests)
                <ul>
                    <li>Basic triple parsing</li>
                    <li>Some strict validation rules not enforced</li>
                </ul>
            </li>
            <li><strong>N-Quads</strong>: Supports named graphs with quad parsing
                <ul>
                    <li>Extends N-Triples with graph names</li>
                </ul>
            </li>
            <li><strong>TriG</strong>: Turtle + named graph blocks
                <ul>
                    <li>GRAPH blocks and default graph support</li>
                    <li>Some edge cases may not be handled</li>
                </ul>
            </li>
            <li><strong>RDF/XML</strong>: rdf:Description, properties, datatypes, nested blank nodes
                <ul>
                    <li>Common patterns supported</li>
                    <li>Advanced features like parseType may be limited</li>
                </ul>
            </li>
            <li><strong>JSON-LD</strong>: @context, @id, @value, @type, @language
                <ul>
                    <li>Basic JSON-LD patterns supported</li>
                    <li>Full context processing not yet implemented</li>
                </ul>
            </li>
        </ul>

        <h4>Test Results</h4>
        <ul>
            <li><strong>rdf11/rdf-turtle</strong>: 74.0% pass rate (219/296 tests) - <strong>IMPROVED from 70.3%</strong>
                <ul>
                    <li>Basic triples, PREFIX/BASE, property lists, Unicode escapes</li>
                    <li>Single/double/triple-quote literals, numeric literals, boolean literals</li>
                    <li>Lexical form preservation for numeric literals (exponents, signs, leading zeros)</li>
                    <li>Anonymous blank nodes [], empty collections ()</li>
                    <li>@base directive and relative IRI resolution</li>
                    <li>Repeated semicolons, PName escape sequences (\_\~\.\-\!\$ etc.)</li>
                    <li>Blank node property lists (partial), collections with items</li>
                </ul>
            </li>
            <li><strong>rdf11/rdf-n-triples</strong>: 100.0% pass rate (70/70 tests) - <strong>PERFECT! Improved from 84.3%</strong>
                <ul>
                    <li>Strict N-Triples validation (no PREFIX/BASE, no abbreviations, no bare literals)</li>
                    <li>Complete IRI validation with Unicode escape support</li>
                    <li>Proper escape sequence validation (only \t, \b, \n, \r, \f, \\, \", \uXXXX, \UXXXXXXXX)</li>
                    <li>All negative syntax tests passing</li>
                </ul>
            </li>
            <li><strong>rdf11/rdf-n-quads</strong>: 100.0% pass rate (87/87 tests) - <strong>PERFECT! Improved from 75.9%</strong>
                <ul>
                    <li>Strict N-Quads validation (same as N-Triples + optional graph component)</li>
                    <li>Complete IRI validation in all positions including graph names</li>
                    <li>Language tag validation (must start with letter)</li>
                    <li>All negative syntax tests passing</li>
                </ul>
            </li>
            <li><strong>rdf11/rdf-trig</strong>: 73.7% pass rate (247/335 tests) - <strong>IMPROVED from 70.4%</strong>
                <ul>
                    <li>Anonymous graph blocks <code>{ triples }</code></li>
                    <li>Named graph blocks <code>&lt;iri&gt; { triples }</code> and <code>_:bnode { triples }</code></li>
                    <li>GRAPH keyword syntax <code>GRAPH &lt;iri&gt; { triples }</code></li>
                    <li>Delegates triple parsing to Turtle parser (70.3% â†’ 73.7% with Turtle improvements)</li>
                    <li>Repeated semicolons, PName escape sequences, numeric literals</li>
                </ul>
            </li>
            <li><strong>rdf11/rdf-xml</strong>: 63.9% pass rate (106/166 tests) - <strong>IMPROVED from 47.0%</strong>
                <ul>
                    <li>Basic rdf:Description, simple properties</li>
                    <li>RDF containers (rdf:Bag, rdf:Seq, rdf:Alt) with blank node subjects</li>
                    <li>Auto-numbered rdf:li elements (rdf:_1, rdf:_2, ...)</li>
                    <li>Explicit rdf:_N properties</li>
                    <li>xml:base for base URI resolution</li>
                    <li>rdf:ID attribute handling with document base URI</li>
                    <li>Property attributes on rdf:Description elements</li>
                    <li>rdf:parseType="Resource" for blank node objects</li>
                    <li>Property attributes on property elements (creates blank nodes)</li>
                    <li>Document base URI support (W3C canonical URIs for test files)</li>
                    <li>Blank node isomorphism (affects many tests), reification, negative test validation</li>
                </ul>
            </li>
            <li><strong>rdf12/</strong>: Latest RDF 1.2 specifications including RDF-star features
                <ul>
                    <li>Test support infrastructure in place</li>
                </ul>
            </li>
        </ul>

        <p><strong>Recent Improvements (Phase 1):</strong></p>
        <ul>
            <li>Fixed manifest parser to correctly identify test types (improved N-Quads detection)</li>
            <li>Added comprehensive Unicode escape sequence support (\uXXXX, \UXXXXXXXX)</li>
            <li>Added single-quote and triple-quote literal support (''', """)</li>
            <li>Implemented anonymous blank nodes [] and empty collections ()</li>
            <li>Added @base directive with relative IRI resolution (RFC 3986)</li>
            <li>Implemented numeric literals (integers, decimals with proper xsd:decimal type, doubles with scientific notation)</li>
            <li>Added boolean literal support (true/false with xsd:boolean type)</li>
            <li><strong>Turtle compliance improved: 44.4% â†’ 62.2%</strong> (+17.8 percentage points, +45 tests)</li>
        </ul>

        <p><strong>Recent Improvements (Phase 3 - Graph Isomorphism & SPARQL Results):</strong></p>
        <ul>
            <li><strong>Turtle/TriG Quick Wins (Numeric Formatting, Semicolons, Escapes):</strong>
                <ul>
                    <li>Fixed numeric literal formatting to preserve trailing zeros (.0)</li>
                    <li>Added support for repeated semicolons in property lists</li>
                    <li>Implemented PName escape sequences (\_\~\.\-\!\$ etc.)</li>
                    <li><strong>Turtle: 66.2% â†’ 70.3%</strong> (+4.1pp, +12 tests)</li>
                    <li><strong>TriG: 66.9% â†’ 70.4%</strong> (+3.5pp, +12 tests)</li>
                </ul>
            </li>
            <li><strong>Literal Lexical Form Preservation:</strong>
                <ul>
                    <li>Fixed boolean literal parsing (matchKeyword already advances position)</li>
                    <li>Preserve original lexical form for numeric literals (1E0, +1, 01, etc.)</li>
                    <li>Applied same fixes to both Turtle and TriG parsers</li>
                    <li><strong>Turtle: 70.3% â†’ 74.0%</strong> (+3.7pp, +11 tests)</li>
                    <li><strong>TriG: 70.4% â†’ 73.7%</strong> (+3.3pp, +11 tests)</li>
                </ul>
            </li>
            <li><strong>Graph Isomorphism for Blank Nodes:</strong>
                <ul>
                    <li>Implemented VF2-inspired backtracking algorithm for blank node matching</li>
                    <li>Properly compares RDF graphs despite different blank node labels</li>
                    <li>Fixed 30 tests across Turtle, RDF/XML, and TriG formats</li>
                    <li><strong>Turtle: 62.2% â†’ 66.2%</strong> (+4.0pp, +12 tests)</li>
                    <li><strong>RDF/XML: 38.8% â†’ 69.3%</strong> (+30.5pp, +51 tests)</li>
                    <li><strong>TriG: 46.0% â†’ 66.9%</strong> (+20.9pp, +70 tests)</li>
                </ul>
            </li>
            <li><strong>SPARQL CSV/TSV Result Serialization:</strong>
                <ul>
                    <li>Implemented W3C-compliant CSV and TSV result format serialization</li>
                    <li>Canonical blank node labeling (a, b, c... for CSV; b0, b1, b2... for TSV)</li>
                    <li>Proper double formatting with scientific notation (1.0E6 for CSV, 1.0e6 for TSV)</li>
                    <li>Datatype handling: skip for basic XSD types, preserve for derived types</li>
                    <li><strong>CSV/TSV tests: 0% â†’ 83.3%</strong> (5/6 tests passing)</li>
                </ul>
            </li>
        </ul>

        <p><strong>Recent Improvements (Phase 2 - TriG & RDF/XML):</strong></p>
        <ul>
            <li><strong>TriG Parser Enhancements:</strong>
                <ul>
                    <li>Implemented anonymous graph blocks <code>{ triples }</code></li>
                    <li>Implemented named graph blocks <code>&lt;iri&gt; { triples }</code> and <code>_:bnode { triples }</code></li>
                    <li>Added lookahead parsing to distinguish graph blocks from regular triples</li>
                    <li><strong>TriG compliance improved: 32.2% â†’ 46.0%</strong> (+13.8 percentage points, +46 tests)</li>
                </ul>
            </li>
            <li><strong>RDF/XML Parser Enhancements (Phase 2a):</strong>
                <ul>
                    <li>Implemented RDF containers (rdf:Bag, rdf:Seq, rdf:Alt)</li>
                    <li>Added auto-numbered rdf:li element support (rdf:_1, rdf:_2, etc.)</li>
                    <li>Implemented explicit rdf:_N property handling</li>
                    <li>Added xml:base tracking for base URI resolution</li>
                    <li>Implemented rdf:ID attribute handling with base URI concatenation</li>
                    <li>Added property attribute support on rdf:Description elements</li>
                    <li>Implemented typed node parsing (elements with implicit rdf:type)</li>
                </ul>
            </li>
            <li><strong>RDF/XML Parser Enhancements (Phase 2b):</strong>
                <ul>
                    <li>Added rdf:parseType="Resource" support for blank node objects</li>
                    <li>Implemented document base URI with SetBaseURI() method</li>
                    <li>Test runner now provides W3C canonical URIs for test files</li>
                    <li>Added property attributes on property elements (structured values)</li>
                    <li>Proper xml: namespace attribute filtering (xml:lang, xml:space, etc.)</li>
                    <li><strong>RDF/XML compliance improved: 20.6% â†’ 38.8%</strong> (+18.2 percentage points, +26 tests)</li>
                </ul>
            </li>
        </ul>

        <h3>Syntax Tests (Parser Validation)</h3>
        <ul>
            <li><strong>Pass Rate: 69.1%</strong> (65/94 tests in syntax-query suite)</li>
            <li>All SELECT expression tests (5/5)</li>
            <li>All aggregate syntax tests (15/15)</li>
            <li>All IN/NOT IN tests (3/3)</li>
            <li>EXISTS/NOT EXISTS parsing</li>
            <li>Property list shorthand (semicolon/comma)</li>
            <li>Boolean literals (true/false)</li>
        </ul>

        <h3>SPARQL Execution Tests (End-to-End Validation)</h3>

        <h4>Implemented and Validated</h4>
        <ul>
            <li><strong>BIND expressions</strong>: 70.0% pass rate (7/10 tests)
                <ul>
                    <li>Basic BIND with expressions</li>
                    <li>BIND variables in subsequent patterns</li>
                    <li>FILTER on BIND variables</li>
                    <li>Known limitations: UNION scoping, forward references</li>
                </ul>
            </li>
            <li><strong>CONSTRUCT queries</strong>: 28.6% pass rate (2/7 tests)
                <ul>
                    <li>Template instantiation</li>
                    <li>CONSTRUCT WHERE shorthand</li>
                    <li>N-Triples output</li>
                </ul>
            </li>
            <li><strong>CSV/TSV Result Formats</strong>: 83.3% pass rate (5/6 tests)
                <ul>
                    <li>CSV format with canonical blank node labels</li>
                    <li>TSV format with proper datatype suffixes</li>
                    <li>Scientific notation formatting for doubles</li>
                    <li>Known limitation: datatype preservation through executor</li>
                </ul>
            </li>
            <li><strong>Basic graph patterns</strong>: Full support
                <ul>
                    <li>Triple patterns with variables</li>
                    <li>Nested loop joins</li>
                    <li>Join ordering optimization</li>
                </ul>
            </li>
            <li><strong>Query modifiers</strong>: Full support
                <ul>
                    <li>DISTINCT (hash-based deduplication)</li>
                    <li>LIMIT and OFFSET</li>
                    <li>ORDER BY (ASC/DESC)</li>
                </ul>
            </li>
            <li><strong>Complex patterns</strong>: Full support
                <ul>
                    <li>OPTIONAL (left outer join)</li>
                    <li>UNION (pattern alternation)</li>
                    <li>MINUS (set difference)</li>
                    <li>GRAPH (named graph queries)</li>
                </ul>
            </li>
            <li><strong>FILTER expressions</strong>: 20+ operators and functions
                <ul>
                    <li>Logical operators (&amp;&amp;, ||, !)</li>
                    <li>Comparison operators (=, !=, &lt;, &gt;, &lt;=, &gt;=)</li>
                    <li>Arithmetic operators (+, -, *, /)</li>
                    <li>IN/NOT IN operators</li>
                    <li>String functions (STRLEN, SUBSTR, UCASE, LCASE, CONCAT, CONTAINS, STRSTARTS, STRENDS)</li>
                    <li>Type checking (BOUND, isIRI, isBlank, isLiteral, isNumeric)</li>
                    <li>Numeric functions (ABS, CEIL, FLOOR, ROUND)</li>
                </ul>
            </li>
        </ul>

        <h4>Parsed But Not Executed</h4>
        <ul>
            <li><strong>EXISTS/NOT EXISTS</strong>: Parser complete, evaluation TODO</li>
            <li><strong>Aggregates</strong>: Syntax supported (COUNT, SUM, AVG, MIN, MAX, GROUP_CONCAT, SAMPLE)</li>
            <li><strong>GROUP BY</strong>: Parsed with variables and expressions</li>
            <li><strong>HAVING</strong>: Parsed with filter conditions</li>
            <li><strong>DESCRIBE</strong>: Parser complete, execution TODO</li>
        </ul>

        <h4>Not Yet Implemented</h4>
        <ul>
            <li>VALUES clause</li>
            <li>Subqueries (detected but not parsed)</li>
            <li>Property paths</li>
            <li>REGEX function</li>
            <li>Date/time functions</li>
            <li>Hash functions (MD5, SHA1, etc.)</li>
            <li>UPDATE operations</li>
            <li>Service federation</li>
        </ul>

        <h2>Implementation Details</h2>

        <h3>Test Runner Architecture</h3>

        <pre><code>Test Runner
    â†“
Manifest Parser (.ttl files)
    â†“
Test Evaluator
    â†“
â”œâ”€ SPARQL Syntax Tests â†’ SPARQL Parser
â”œâ”€ SPARQL Evaluation Tests â†’ Full Pipeline:
â”‚   â”œâ”€ Turtle Parser (load test data)
â”‚   â”œâ”€ SPARQL Parser (parse query)
â”‚   â”œâ”€ Optimizer (build execution plan)
â”‚   â”œâ”€ Executor (run query)
â”‚   â”œâ”€ SPARQL XML Parser (parse expected results)
â”‚   â””â”€ Result Comparator (validate correctness)
â”œâ”€ RDF Positive Syntax Tests â†’ RDF Parser (validate parse success)
â”œâ”€ RDF Negative Syntax Tests â†’ RDF Parser (validate parse failure)
â”œâ”€ RDF Evaluation Tests â†’ RDF Parser + Triple Comparator
â”‚   â”œâ”€ Parse input RDF (Turtle/TriG/RDF-XML/JSON-LD)
â”‚   â”œâ”€ Parse expected N-Triples output
â”‚   â””â”€ Compare triples (order-independent, blank node handling)
â””â”€ SPARQL Update Tests â†’ (TODO)</code></pre>

        <h3>Key Components</h3>

        <p><strong>Turtle Parser</strong> (<code>pkg/rdf/turtle.go</code>):</p>
        <ul>
            <li>Loads RDF test data from <code>.ttl</code> files</li>
            <li>Supports PREFIX/BASE declarations</li>
            <li>Handles IRIs, blank nodes, literals</li>
            <li>Supports datatypes and language tags</li>
            <li>Sufficient for W3C test data files</li>
        </ul>

        <p><strong>SPARQL XML Parser</strong> (<code>pkg/server/results/xml.go</code>):</p>
        <ul>
            <li>Parses expected results from <code>.srx</code> files</li>
            <li>Converts to RDF term bindings</li>
            <li>Supports all RDF term types</li>
            <li>Enables order-independent result comparison</li>
        </ul>

        <p><strong>Query Evaluation</strong> (<code>internal/testsuite/runner.go</code>):</p>
        <ol>
            <li>Clear store between tests</li>
            <li>Load test data using Turtle parser</li>
            <li>Parse SPARQL query</li>
            <li>Optimize query plan</li>
            <li>Execute query with full pipeline</li>
            <li>Parse expected results</li>
            <li>Compare actual vs expected (order-independent)</li>
        </ol>

        <h3>Manifest Format</h3>

        <p>Manifests are Turtle files describing tests:</p>

        <pre><code>@prefix mf: &lt;http://www.w3.org/2001/sw/DataAccess/tests/test-manifest#&gt; .
@prefix qt: &lt;http://www.w3.org/2001/sw/DataAccess/tests/test-query#&gt; .

&lt;&gt; rdf:type mf:Manifest ;
    mf:entries (
        :test1
        :test2
    ) .

:test1 a mf:PositiveSyntaxTest11 ;
    mf:name "Test Name" ;
    mf:action &lt;query-file.rq&gt; .</code></pre>

        <h2>Adding Test Support</h2>

        <p>To add support for a new test type:</p>

        <ol>
            <li><strong>Update Manifest Parser</strong> (<code>internal/testsuite/manifest.go</code>)
                <ul>
                    <li>Add new <code>TestType</code> constant</li>
                    <li>Update parser to recognize new test type</li>
                </ul>
            </li>
            <li><strong>Implement Test Evaluator</strong> (<code>internal/testsuite/runner.go</code>)
                <ul>
                    <li>Add case in <code>runTest()</code> switch</li>
                    <li>Implement evaluation function</li>
                </ul>
            </li>
            <li><strong>Add Required Features</strong> (if needed)
                <ul>
                    <li>Extend parser for new syntax</li>
                    <li>Add optimizer support</li>
                    <li>Implement executor operators</li>
                </ul>
            </li>
        </ol>

        <h2>Testing Philosophy</h2>

        <p>The W3C SPARQL test suite serves multiple purposes:</p>

        <ol>
            <li><strong>Compliance Validation</strong> - Ensure standard conformance</li>
            <li><strong>Regression Testing</strong> - Catch breaking changes</li>
            <li><strong>Feature Tracking</strong> - Identify gaps in implementation</li>
            <li><strong>Documentation</strong> - Tests demonstrate expected behavior</li>
        </ol>

        <h2>Integration with CI/CD</h2>

        <h3>GitHub Actions Example</h3>

        <pre><code>name: SPARQL Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          submodules: recursive

      - uses: actions/setup-go@v4
        with:
          go-version: '1.21'

      - name: Build Test Runner
        run: go build -o test-runner ./cmd/test-runner

      - name: Run Syntax Tests
        run: ./test-runner testdata/rdf-tests/sparql/sparql11/syntax-query</code></pre>

        <h2>References</h2>

        <ul>
            <li><a href="https://www.w3.org/2009/sparql/docs/tests/" target="_blank">W3C SPARQL 1.1 Test Cases</a></li>
            <li><a href="https://github.com/w3c/rdf-tests" target="_blank">RDF Test Suite Repository</a></li>
            <li><a href="https://www.w3.org/TR/sparql11-query/" target="_blank">SPARQL 1.1 Query Specification</a></li>
            <li><a href="https://www.w3.org/2001/sw/DataAccess/tests/test-manifest" target="_blank">Test Manifest Vocabulary</a></li>
        </ul>

        <h2>Future Improvements</h2>

        <ul>
            <li>Complete evaluation test support</li>
            <li>Add UPDATE test support</li>
            <li>Improve datatype preservation through SPARQL executor</li>
            <li>Support federated query tests</li>
            <li>Generate HTML test reports</li>
            <li>Track compliance percentage over time</li>
            <li>Add benchmarking for performance tests</li>
        </ul>

        <h2>Contributing</h2>

        <p>When adding new SPARQL features:</p>

        <ol>
            <li>Run relevant test suite section</li>
            <li>Document pass rate in commit message</li>
            <li>Create issues for failing tests</li>
            <li>Update this document with current status</li>
        </ol>
    </main>

    <footer>
        <p>&copy; 2025 Trigo Project. Licensed under MIT License.</p>
        <p>
            <a href="https://github.com/aleksaelezovic/trigo" target="_blank">GitHub</a> |
            <a href="https://github.com/aleksaelezovic/trigo/issues" target="_blank">Issues</a> |
            <a href="https://github.com/aleksaelezovic/trigo/blob/main/CLAUDE.md" target="_blank">AI Assistant Context</a>
        </p>
    </footer>
</body>
</html>